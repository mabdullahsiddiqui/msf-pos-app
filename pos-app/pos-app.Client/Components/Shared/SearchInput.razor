@using Microsoft.AspNetCore.Components

<div class="position-relative">
    <input type="text" 
           id="@Id" 
           class="form-control pe-4 @(AdditionalClass ?? "")" 
           placeholder="@Placeholder" 
           @bind="CurrentValue" 
           @bind:event="oninput" />
    @if (!string.IsNullOrWhiteSpace(CurrentValue))
    {
        <span class="position-absolute top-50 end-0 translate-middle-y me-2 text-muted" 
              style="cursor: pointer; font-size: 18px; z-index: 10;" 
              @onclick="ClearSearch" 
              title="Clear Search">
            Ã—
        </span>
    }
</div>

@code {
    // Current search value
    [Parameter] public string Value { get; set; } = string.Empty;

    // Event callback when the search value changes
    [Parameter] public EventCallback<string> ValueChanged { get; set; }

    // Placeholder text for the input
    [Parameter] public string? Placeholder { get; set; }

    // HTML id attribute for the input
    [Parameter] public string? Id { get; set; }

    // Additional CSS classes to apply
    [Parameter] public string? AdditionalClass { get; set; }

    private string CurrentValue
    {
        get => Value;
        set
        {
            if (Value != value)
            {
                Value = value;
                ValueChanged.InvokeAsync(value);
            }
        }
    }

    private void ClearSearch()
    {
        CurrentValue = string.Empty;
    }
}
